<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage ¬∑ HTM.jl</title><link rel="canonical" href="https://schneiderfelipe.github.io/HTM.jl/usage/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">HTM.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Usage</a><ul class="internal"><li><a class="tocitem" href="#Basic-features"><span>Basic features</span></a></li><li><a class="tocitem" href="#Why-not-concatenate?"><span>Why not concatenate?</span></a></li></ul></li><li><a class="tocitem" href="../design/">Design</a></li><li><a class="tocitem" href="../benchmarks/">Benchmarks</a></li><li><a class="tocitem" href="../related/">Related packages</a></li><li><a class="tocitem" href="../autodocs/">Internals</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Usage</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/schneiderfelipe/HTM.jl/blob/master/docs/src/usage.md#" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Usage-guide"><a class="docs-heading-anchor" href="#Usage-guide">Usage guide</a><a id="Usage-guide-1"></a><a class="docs-heading-anchor-permalink" href="#Usage-guide" title="Permalink"></a></h1><p>HTM.jl provides a <a href="https://docs.julialang.org/en/v1/manual/strings/#non-standard-string-literals">non-standard string literal</a> macro (<code>@htm_str</code>) for generating HTML with a syntax inspired by <a href="https://github.com/developit/htm"><code>htm</code></a>, <a href="https://reactjs.org/docs/introducing-jsx.html">JSX</a>, <a href="https://lit-html.polymer-project.org/guide">and</a> <a href="https://github.com/observablehq/htl">others</a>. HTM.jl interpolates <a href="https://docs.julialang.org/en/v1/manual/strings/#string-interpolation">embedded Julia expressions</a> based on context:</p><pre><code class="language-julia">using HTM

# Photograph by Suniltg at Wikimedia Commons, distributed under a CC-BY 3.0 license.
üçç() = htm&quot;&lt;img src=$(pineapple) /&gt;&quot;
htm&quot;&lt;p&gt;&lt;a href=$(pineapple)&gt;$(üçç())&lt;/a&gt;&lt;/p&gt;&quot;</code></pre><p><a href="https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/%E0%B4%95%E0%B5%88%E0%B4%A4%E0%B4%9A%E0%B5%8D%E0%B4%9A%E0%B4%95%E0%B5%8D%E0%B4%95.jpg/800px-%E0%B4%95%E0%B5%88%E0%B4%A4%E0%B4%9A%E0%B5%8D%E0%B4%9A%E0%B4%95%E0%B5%8D%E0%B4%95.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/%E0%B4%95%E0%B5%88%E0%B4%A4%E0%B4%9A%E0%B5%8D%E0%B4%9A%E0%B4%95%E0%B5%8D%E0%B4%95.jpg/800px-%E0%B4%95%E0%B5%88%E0%B4%A4%E0%B4%9A%E0%B5%8D%E0%B4%9A%E0%B4%95%E0%B5%8D%E0%B4%95.jpg" /></a></p><p>What follows is a step-by-step guide of its main features.</p><h2 id="Basic-features"><a class="docs-heading-anchor" href="#Basic-features">Basic features</a><a id="Basic-features-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-features" title="Permalink"></a></h2><p>HTM.jl parses markup as nodes, <code>String</code> (or any object in general), or <code>nothing</code>:</p><pre><code class="language-julia-repl">julia&gt; htm&quot;&lt;div&gt;üçç&lt;/div&gt;&quot;
&lt;div&gt;üçç&lt;/div&gt;</code></pre><pre><code class="language-julia-repl">julia&gt; htm&quot;üçç&quot;
&quot;üçç&quot;</code></pre><pre><code class="language-julia-repl">julia&gt; htm&quot;&quot; === nothing
true</code></pre><p>Multiple top-level elements (<a href="https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment">&quot;document fragments&quot;</a>) are represented as arrays:</p><pre><code class="language-julia-repl">julia&gt; htm&quot;&lt;div /&gt;&lt;div /&gt;&quot;
2-element Vector{Hyperscript.Node{Hyperscript.HTMLSVG}}:
 &lt;div&gt;&lt;/div&gt;
 &lt;div&gt;&lt;/div&gt;</code></pre><h3 id="Objects-as-elements"><a class="docs-heading-anchor" href="#Objects-as-elements">Objects as elements</a><a id="Objects-as-elements-1"></a><a class="docs-heading-anchor-permalink" href="#Objects-as-elements" title="Permalink"></a></h3><p>Embedded Julia expressions are interpolated appropriately, allowing automatic processing and non-serializable objects. The backend (<a href="https://github.com/yurivish/Hyperscript.jl">Hyperscript.jl</a> by default) will usually use <a href="https://youtu.be/S1Fb5oNhhbc">Julia&#39;s display system</a> to render anything showable as HTML:</p><pre><code class="language-">using HTM  # hide
using Plots

default(size=(250, 250))  # hide
# Graph simplified from &lt;https://www.desmos.com/calculator/eds5nef5cj&gt;.
p = begin
    plot!(Œ∏ -&gt; 30.4 / (2 + sin(Œ∏)) - 9.5, 0, 2œÄ, color=:brown, proj=:polar, legend=nothing)
    for (a, b) in zip([-4  , 3  ,  9.6, 16.2, 22.7, 29.2, 35.7],
                      [ 0.4, 6.3, 12.3, 18.3, 24.4, 30.5, 36.5])
        plot!(Œ∏ -&gt; Œ∏ / 2 + 2sin(4œÄ * Œ∏), a, b, color=:orange)
    end
    plot!(Œ∏ -&gt; 7(1 - sin(11Œ∏)), 0.12, 3, color=:green)
end

pineapple = &quot;https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/%E0%B4%95%E0%B5%88%E0%B4%A4%E0%B4%9A%E0%B5%8D%E0%B4%9A%E0%B4%95%E0%B5%8D%E0%B4%95.jpg/800px-%E0%B4%95%E0%B5%88%E0%B4%A4%E0%B4%9A%E0%B5%8D%E0%B4%9A%E0%B4%95%E0%B5%8D%E0%B4%95.jpg&quot;  # hide
üçç() = htm&quot;&lt;img src=$(pineapple) /&gt;&quot;  # hide
htm&quot;&quot;&quot;&lt;div style=&quot;display: flex&quot;&gt;
    &lt;div style=&quot;transform: rotate(5deg)&quot;&gt;$(p)&lt;/div&gt;
    &lt;div style=&quot;max-width: 50%&quot;&gt;$(üçç())&lt;/div&gt;
&lt;/div&gt;&quot;&quot;&quot;</code></pre><p>So if you have a function that generates an element (say by using HTM.jl), you can embed the result into another element:</p><pre><code class="language-julia">orange(text) = htm&quot;&lt;span style=\&quot;background: orange\&quot;&gt;$(text)&lt;/span&gt;&quot;
htm&quot;&lt;p&gt;&lt;strong&gt;This is $(orange(\&quot;really\&quot;)) important.&lt;/strong&gt;&lt;/p&gt;&quot;</code></pre><p><strong>This is <span style="background: orange">really</span> important.</strong></p><p>Contrary to <a href="https://reactjs.org/docs/jsx-in-depth.html#choosing-the-type-at-runtime">JSX</a> or <a href="https://github.com/observablehq/htl#errors-on-invalid-bindings">Hypertext Literal</a>, HTM.jl allows you to interpolate tags as well:</p><pre><code class="language-julia-repl">julia&gt; htm&quot;&lt;h$(4)&gt;I&#39;m a header&lt;//&gt;&quot;
&lt;h4&gt;I&amp;#39;m a header&lt;/h4&gt;</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>The universal end-tag <code>&lt;//&gt;</code> above is a convenience taken from <a href="https://github.com/developit/htm"><code>htm</code></a>.</p></div></div><p><a href="https://stackoverflow.com/q/7381974/4039050">Escaping</a> is left to the backend, which works really nice by default:</p><pre><code class="language-julia-repl">julia&gt; htm&quot;&lt;p&gt;Look, Ma, $(\&quot;&lt;em&gt;automatic escaping&lt;/em&gt;\&quot;)!&lt;/p&gt;&quot;
&lt;p&gt;Look, Ma, &amp;#60;em&amp;#62;automatic escaping&amp;#60;/em&amp;#62;&amp;#33;&lt;/p&gt;</code></pre><p>Note that <code>nothing</code> elements are not rendered by the default backend:</p><pre><code class="language-julia">htm&quot;&lt;p&gt;&lt;strong&gt;There&#39;s no $(nothing) here.&lt;/strong&gt;&lt;/p&gt;&quot;</code></pre><p><strong>There&#39;s no  here.</strong></p><h3 id="Iterable-objects"><a class="docs-heading-anchor" href="#Iterable-objects">Iterable objects</a><a id="Iterable-objects-1"></a><a class="docs-heading-anchor-permalink" href="#Iterable-objects" title="Permalink"></a></h3><p>You can interpolate iterables into data, too, even iterables of elements:</p><pre><code class="language-julia">htm&quot;&lt;p&gt;&lt;strong&gt;Easy as $([1, 2, 3])&lt;/strong&gt;&lt;/p&gt;&quot;</code></pre><p><strong>Easy as 123</strong></p><p>That is useful for mapping data to content via <a href="https://docs.julialang.org/en/v1/base/collections/#Base.map"><code>map</code></a> or by <a href="https://docs.julialang.org/en/v1/manual/arrays/#Broadcasting">broadcasting</a>:</p><pre><code class="language-julia">using Colors

# Example taken from &lt;https://observablehq.com/@observablehq/htl&gt;.
rows = map(enumerate(colormap(&quot;Oranges&quot;, 5))) do (i, color)
    htm&quot;&quot;&quot;&lt;tr&gt;
        &lt;td&gt;$(i)&lt;/td&gt;
        &lt;td&gt;&lt;code&gt;#$(hex(color))&lt;/code&gt;&lt;/td&gt;
        &lt;td style=&quot;background: #$(hex(color));&quot;&gt;&lt;/td&gt;
    &lt;/tr&gt;&quot;&quot;&quot;
end

header = htm&quot;&quot;&quot;&lt;tr&gt;
    $(htm&quot;&lt;th&gt;$(column)&lt;/th&gt;&quot; for column in [&quot;#&quot;, &quot;Color&quot;, &quot;Swatch&quot;])
&lt;/tr&gt;&quot;&quot;&quot;

htm&quot;&quot;&quot;&lt;table&gt;
    &lt;caption&gt;Five shades of üçç&lt;/caption&gt;
    &lt;thead&gt;$(header)&lt;/thead&gt;
    &lt;tbody&gt;$(rows)&lt;/tbody&gt;
&lt;/table&gt;&quot;&quot;&quot;</code></pre><table><caption>Five shades of üçç</caption><thead><tr><th>#</th><th>Color</th><th>Swatch</th></tr></thead><tbody><tr><td>1</td><td><code>#FFFBF8</code></td><td style="background: #FFFBF8;"></td></tr><tr><td>2</td><td><code>#FFD6B6</code></td><td style="background: #FFD6B6;"></td></tr><tr><td>3</td><td><code>#FF9D60</code></td><td style="background: #FF9D60;"></td></tr><tr><td>4</td><td><code>#E3500C</code></td><td style="background: #E3500C;"></td></tr><tr><td>5</td><td><code>#732007</code></td><td style="background: #732007;"></td></tr></tbody></table><h3 id="Optional-attributes"><a class="docs-heading-anchor" href="#Optional-attributes">Optional attributes</a><a id="Optional-attributes-1"></a><a class="docs-heading-anchor-permalink" href="#Optional-attributes" title="Permalink"></a></h3><p>If an attribute value is <code>false</code>, it&#39;s as if the attribute hadn&#39;t been specified. Conversely, if an attribute value is <code>true</code>, it&#39;s equivalent to the empty string. This is useful for setting an attribute based on a boolean flag:</p><pre><code class="language-julia">htm&quot;&lt;p&gt;&lt;button disabled=$(true)&gt;Can&#39;t click me&lt;/button&gt;&lt;/p&gt;&quot;</code></pre><p><button disabled>Can&#39;t click me</button></p><p><code>nothing</code> attributes behave the same as <code>false</code>:</p><pre><code class="language-julia">htm&quot;&lt;p&gt;&lt;button disabled=$(nothing)&gt;Can click me&lt;/button&gt;&lt;/p&gt;&quot;</code></pre><p><button>Can click me</button></p><h3 id="Spread-attributes"><a class="docs-heading-anchor" href="#Spread-attributes">Spread attributes</a><a id="Spread-attributes-1"></a><a class="docs-heading-anchor-permalink" href="#Spread-attributes" title="Permalink"></a></h3><p>You can set multiple attributes by interpolating a dictionary in place of attributes:</p><pre><code class="language-julia">attrs = Dict(
    &quot;onmouseover&quot; =&gt; &quot;this.style.transform = &#39;rotate(5deg)&#39;&quot;,
    &quot;onmousedown&quot; =&gt; &quot;this.style.transform = &#39;rotate(25deg)&#39;&quot;,
    &quot;onmouseup&quot; =&gt; &quot;this.style.transform = &#39;rotate(5deg)&#39;&quot;,
    &quot;onmouseout&quot; =&gt; &quot;this.style.transform = &#39;&#39;&quot;,
    &quot;onclick&quot; =&gt; &quot;alert(&#39;You clicked! üççüéâ&#39;)&quot;,
)

htm&quot;&lt;p&gt;&lt;button $(attrs)&gt;Click me&lt;/button&gt;&lt;/p&gt;&quot;</code></pre><p><button onclick="alert('You clicked! üççüéâ')" onmouseout="this.style.transform = ''" onmouseup="this.style.transform = 'rotate(5deg)'" onmousedown="this.style.transform = 'rotate(25deg)'" onmouseover="this.style.transform = 'rotate(5deg)'">Click me</button></p><h2 id="Why-not-concatenate?"><a class="docs-heading-anchor" href="#Why-not-concatenate?">Why not concatenate?</a><a id="Why-not-concatenate?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-not-concatenate?" title="Permalink"></a></h2><p>Indeed the simplest way to generate web content is to write HTML. Yet, simple concatenation has two significant drawbacks:</p><p><strong>It confounds markup with text and other content</strong>: if an interpolated value happens to include characters that are meaningful markup, the result may render unexpectedly. An ampersand (<code>&amp;</code>) can be interpreted as a character entity reference, for instance:</p><pre><code class="language-julia">currencies = &quot;dollars&amp;pounds&quot;

HTML(&quot;&lt;p&gt;&lt;strong&gt;My favorite currencies are $(currencies).&lt;/strong&gt;&lt;/p&gt;&quot;)</code></pre><p><strong>My favorite currencies are dollars&pounds.</strong></p><p>Compare the above with the following:</p><pre><code class="language-julia">htm&quot;&lt;p&gt;&lt;strong&gt;My favorite currencies are $(currencies).&lt;/strong&gt;&lt;/p&gt;&quot;</code></pre><p><strong>My favorite currencies are dollars&#38;pounds.</strong></p><p><strong>You lose composition</strong>: interpolated content must be serialized as markup. You cannot combine literal HTML with content created by libraries such as <a href="http://docs.juliaplots.org/latest/">Plots.jl</a>. And some content can&#39;t be serialized:</p><pre><code class="language-">using HTM, Plots  # hide

HTML(&quot;&lt;p style=\&quot;display:   inline-block; transform: rotate(180deg)\&quot;&gt;
    üçç
    $(plot(x -&gt; x^2, -1, 1))
&lt;/p&gt;&quot;)</code></pre><p>The above is probably <em>not</em> what you want.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">¬´ Home</a><a class="docs-footer-nextpage" href="../design/">Design ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 3 May 2021 19:00">Monday 3 May 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
